
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Gentelella Alela! | </title>

    <!-- Bootstrap -->
    <link href="../vendors/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="../vendors/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <!-- NProgress -->
    <link href="../vendors/nprogress/nprogress.css" rel="stylesheet">

    <!-- Custom Theme Style -->
    <link href="../build/css/custom.min.css" rel="stylesheet">
  </head>

  <body class="nav-md">
    <div class="container body">
      <div class="main_container">
        <div class="col-md-3 left_col">
          <div class="left_col scroll-view">
            <div class="navbar nav_title" style="border: 0;">
              <a href="index.html" class="site_title"><i class="fa fa-paw"></i> <span>Gentelella Alela!</span></a>
            </div>

            <div class="clearfix"></div>

            <!-- menu profile quick info -->
            <div class="profile clearfix">
              <div class="profile_pic">
                <img src="images/img.jpg" alt="..." class="img-circle profile_img">
              </div>
              <div class="profile_info">
                <span>Welcome,</span>
                <h2>John Doe</h2>
              </div>
            </div>
            <!-- /menu profile quick info -->

            <br />

            <!-- sidebar menu -->
            <div id="sidebar-menu" class="main_menu_side hidden-print main_menu">
              <div class="menu_section">
                <h3>General</h3>
                <ul class="nav side-menu">
                  <li><a><i class="fa fa-home"></i> Home <span class="fa fa-chevron-down"></span></a>
                    <ul class="nav child_menu">
                      <li><a href="index.html">Dashboard</a></li>
                      <li><a href="index2.html">Dashboard2</a></li>
                      <li><a href="index3.html">Dashboard3</a></li>
                    </ul>
                  </li>
                  <li><a><i class="fa fa-edit"></i> Forms <span class="fa fa-chevron-down"></span></a>
                    <ul class="nav child_menu">
                      <li><a href="form.html">General Form</a></li>
                      <li><a href="form_advanced.html">Advanced Components</a></li>
                      <li><a href="form_validation.html">Form Validation</a></li>
                      <li><a href="form_wizards.html">Form Wizard</a></li>
                      <li><a href="form_upload.html">Form Upload</a></li>
                      <li><a href="form_buttons.html">Form Buttons</a></li>
                    </ul>
                  </li>
                  <li><a><i class="fa fa-desktop"></i> UI Elements <span class="fa fa-chevron-down"></span></a>
                    <ul class="nav child_menu">
                      <li><a href="general_elements.html">General Elements</a></li>
                      <li><a href="media_gallery.html">Media Gallery</a></li>
                      <li><a href="typography.html">Typography</a></li>
                      <li><a href="icons.html">Icons</a></li>
                      <li><a href="glyphicons.html">Glyphicons</a></li>
                      <li><a href="widgets.html">Widgets</a></li>
                      <li><a href="invoice.html">Invoice</a></li>
                      <li><a href="inbox.html">Inbox</a></li>
                      <li><a href="calendar.html">Calendar</a></li>
                    </ul>
                  </li>
                  <li><a><i class="fa fa-table"></i> Tables <span class="fa fa-chevron-down"></span></a>
                    <ul class="nav child_menu">
                      <li><a href="tables.html">Tables</a></li>
                      <li><a href="tables_dynamic.html">Table Dynamic</a></li>
                    </ul>
                  </li>
                  <li><a><i class="fa fa-bar-chart-o"></i> Data Presentation <span class="fa fa-chevron-down"></span></a>
                    <ul class="nav child_menu">
                      <li><a href="chartjs.html">Chart JS</a></li>
                      <li><a href="chartjs2.html">Chart JS2</a></li>
                      <li><a href="morisjs.html">Moris JS</a></li>
                      <li><a href="echarts.html">ECharts</a></li>
                      <li><a href="other_charts.html">Other Charts</a></li>
                    </ul>
                  </li>
                  <li><a><i class="fa fa-clone"></i>Layouts <span class="fa fa-chevron-down"></span></a>
                    <ul class="nav child_menu">
                      <li><a href="fixed_sidebar.html">Fixed Sidebar</a></li>
                      <li><a href="fixed_footer.html">Fixed Footer</a></li>
                    </ul>
                  </li>
                </ul>
              </div>
              <div class="menu_section">
                <h3>Live On</h3>
                <ul class="nav side-menu">
                  <li><a><i class="fa fa-bug"></i> Additional Pages <span class="fa fa-chevron-down"></span></a>
                    <ul class="nav child_menu">
                      <li><a href="e_commerce.html">E-commerce</a></li>
                      <li><a href="projects.html">Projects</a></li>
                      <li><a href="project_detail.html">Project Detail</a></li>
                      <li><a href="contacts.html">Contacts</a></li>
                      <li><a href="profile.html">Profile</a></li>
                    </ul>
                  </li>
                  <li><a><i class="fa fa-windows"></i> Extras <span class="fa fa-chevron-down"></span></a>
                    <ul class="nav child_menu">
                      <li><a href="page_403.html">403 Error</a></li>
                      <li><a href="page_404.html">404 Error</a></li>
                      <li><a href="page_500.html">500 Error</a></li>
                      <li><a href="plain_page.html">Plain Page</a></li>
                      <li><a href="login.html">Login Page</a></li>
                      <li><a href="pricing_tables.html">Pricing Tables</a></li>
                    </ul>
                  </li>
                  <li><a><i class="fa fa-sitemap"></i> Multilevel Menu <span class="fa fa-chevron-down"></span></a>
                    <ul class="nav child_menu">
                        <li><a href="#level1_1">Level One</a>
                        <li><a>Level One<span class="fa fa-chevron-down"></span></a>
                          <ul class="nav child_menu">
                            <li class="sub_menu"><a href="level2.html">Level Two</a>
                            </li>
                            <li><a href="#level2_1">Level Two</a>
                            </li>
                            <li><a href="#level2_2">Level Two</a>
                            </li>
                          </ul>
                        </li>
                        <li><a href="#level1_2">Level One</a>
                        </li>
                    </ul>
                  </li>                  
                  <li><a href="javascript:void(0)"><i class="fa fa-laptop"></i> Landing Page <span class="label label-success pull-right">Coming Soon</span></a></li>
                </ul>
              </div>

            </div>
            <!-- /sidebar menu -->

            <!-- /menu footer buttons -->
            <div class="sidebar-footer hidden-small">
              <a data-toggle="tooltip" data-placement="top" title="Settings">
                <span class="glyphicon glyphicon-cog" aria-hidden="true"></span>
              </a>
              <a data-toggle="tooltip" data-placement="top" title="FullScreen">
                <span class="glyphicon glyphicon-fullscreen" aria-hidden="true"></span>
              </a>
              <a data-toggle="tooltip" data-placement="top" title="Lock">
                <span class="glyphicon glyphicon-eye-close" aria-hidden="true"></span>
              </a>
              <a data-toggle="tooltip" data-placement="top" title="Logout" href="login.html">
                <span class="glyphicon glyphicon-off" aria-hidden="true"></span>
              </a>
            </div>
            <!-- /menu footer buttons -->
          </div>
        </div>

        <!-- top navigation -->
        <div class="top_nav">
          <div class="nav_menu">
            <nav>
              <div class="nav toggle">
                <a id="menu_toggle"><i class="fa fa-bars"></i></a>
              </div>

              <ul class="nav navbar-nav navbar-right">
                <li class="">
                  <a href="javascript:;" class="user-profile dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                    <img src="images/img.jpg" alt="">John Doe
                    <span class=" fa fa-angle-down"></span>
                  </a>
                  <ul class="dropdown-menu dropdown-usermenu pull-right">
                    <li><a href="javascript:;"> Profile</a></li>
                    <li>
                      <a href="javascript:;">
                        <span class="badge bg-red pull-right">50%</span>
                        <span>Settings</span>
                      </a>
                    </li>
                    <li><a href="javascript:;">Help</a></li>
                    <li><a href="login.html"><i class="fa fa-sign-out pull-right"></i> Log Out</a></li>
                  </ul>
                </li>

                <li role="presentation" class="dropdown">
                  <a href="javascript:;" class="dropdown-toggle info-number" data-toggle="dropdown" aria-expanded="false">
                    <i class="fa fa-envelope-o"></i>
                    <span class="badge bg-green">6</span>
                  </a>
                  <ul id="menu1" class="dropdown-menu list-unstyled msg_list" role="menu">
                    <li>
                      <a>
                        <span class="image"><img src="images/img.jpg" alt="Profile Image" /></span>
                        <span>
                          <span>John Smith</span>
                          <span class="time">3 mins ago</span>
                        </span>
                        <span class="message">
                          Film festivals used to be do-or-die moments for movie makers. They were where...
                        </span>
                      </a>
                    </li>
                    <li>
                      <a>
                        <span class="image"><img src="images/img.jpg" alt="Profile Image" /></span>
                        <span>
                          <span>John Smith</span>
                          <span class="time">3 mins ago</span>
                        </span>
                        <span class="message">
                          Film festivals used to be do-or-die moments for movie makers. They were where...
                        </span>
                      </a>
                    </li>
                    <li>
                      <a>
                        <span class="image"><img src="images/img.jpg" alt="Profile Image" /></span>
                        <span>
                          <span>John Smith</span>
                          <span class="time">3 mins ago</span>
                        </span>
                        <span class="message">
                          Film festivals used to be do-or-die moments for movie makers. They were where...
                        </span>
                      </a>
                    </li>
                    <li>
                      <a>
                        <span class="image"><img src="images/img.jpg" alt="Profile Image" /></span>
                        <span>
                          <span>John Smith</span>
                          <span class="time">3 mins ago</span>
                        </span>
                        <span class="message">
                          Film festivals used to be do-or-die moments for movie makers. They were where...
                        </span>
                      </a>
                    </li>
                    <li>
                      <div class="text-center">
                        <a>
                          <strong>See All Alerts</strong>
                          <i class="fa fa-angle-right"></i>
                        </a>
                      </div>
                    </li>
                  </ul>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <!-- /top navigation -->

        <!-- page content -->
        <div class="right_col" role="main">
          <div class="">
            <div class="page-title">
              <div class="title_left">
                <h3>Multilevel Menu <small> Page to demonstrate multilevel menu</small></h3>
              </div>
            </div>
			
			
			<div class="row">
              <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="x_panel">
                  <div class="x_title">
                    <h2>Form Design <small>different form elements</small></h2>
                    <ul class="nav navbar-right panel_toolbox">
                      <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                      </li>

                    </ul>
                    <div class="clearfix"></div>
                  </div>
                  <div class="x_content">
                    <br />
<?php echo $this->home_model->sessao();?>
<?php
$codigo_empresa = $this->session->userdata('id');
$id_cript = url_base64_encode($id);
if($codigo_empresa!=$this->uri->segment(4))
{
 redirect(site_url('home'));
}
$estadosBrasileiros = array(
  array("sigla" => "AC", "nome" => "Acre"),
  array("sigla" => "AL", "nome" => "Alagoas"),
  array("sigla" => "AM", "nome" => "Amazonas"),
  array("sigla" => "AP", "nome" => "Amapá"),
  array("sigla" => "BA", "nome" => "Bahia"),
  array("sigla" => "CE", "nome" => "Ceará"),
  array("sigla" => "DF", "nome" => "Distrito Federal"),
  array("sigla" => "ES", "nome" => "Espírito Santo"),
  array("sigla" => "GO", "nome" => "Goiás"),
  array("sigla" => "MA", "nome" => "Maranhão"),
  array("sigla" => "MT", "nome" => "Mato Grosso"),
  array("sigla" => "MS", "nome" => "Mato Grosso do Sul"),
  array("sigla" => "MG", "nome" => "Minas Gerais"),
  array("sigla" => "PA", "nome" => "Pará"),
  array("sigla" => "PB", "nome" => "Paraíba"),
  array("sigla" => "PR", "nome" => "Paraná"),
  array("sigla" => "PE", "nome" => "Pernambuco"),
  array("sigla" => "PI", "nome" => "Piauí"),
  array("sigla" => "RJ", "nome" => "Rio de Janeiro"),
  array("sigla" => "RN", "nome" => "Rio Grande do Norte"),
  array("sigla" => "RO", "nome" => "Rondônia"),
  array("sigla" => "RS", "nome" => "Rio Grande do Sul"),
  array("sigla" => "RR", "nome" => "Roraima"),
  array("sigla" => "SC", "nome" => "Santa Catarina"),
  array("sigla" => "SE", "nome" => "Sergipe"),
  array("sigla" => "SP", "nome" => "São Paulo"),
  array("sigla" => "TO", "nome" => "Tocantins")
); 
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <?php $this->load->view('clinica/titulo');?>
  <link rel="shortcut icon" href="<?php echo base_url('imagens/favicon.ico')?>"/>

  <link href="<?php echo base_url('css/application.css') ?>" media="all" rel="stylesheet" type="text/css">
  <script src="<?php echo base_url('js/jquery_ujs.js') ?>" type="text/javascript"></script>
  <script src="<?php echo base_url('js/log_empresas.js') ?>" type="text/javascript"></script>
  <script src="<?php echo base_url('js/application.js') ?>" type="text/javascript"></script>
  <script type="text/javascript" src="<?php echo base_url('js/jquery.js');?>"></script>
  <script type="text/javascript" src="<?php echo base_url('js/jquery.mask.js');?>"></script>
  <link rel="stylesheet" href="<?php echo base_url('includes/bootstrap/css/bootstrap.min.css') ?>"><!--  Bootstrap -->
  <script src="<?php echo base_url('includes/bootstrap/js/bootstrap.min.js') ?>"></script><!--  Bootstrap --> 
  <script type="text/javascript" src="<?php echo base_url('js/jquery-ui.js') ?>"></script><!--  jquery autocompleter-->
  <link rel="stylesheet" href="<?php echo base_url('js/jquery-ui.css') ?>"></script><!--  jquery autocompleter-->
  <script type="text/javascript" src="<?php echo base_url('includes/bootstrap/js/popper.min.js') ?>"></script><!--  Bootstrap Popover -->

  <script type="text/javascript">
    $(document).ready(function(){

     $('#v_cpf').mask('000.000.000-00',{placeholder:'999.999.999-99'});
     $('#v_telefone').mask('(99) 99999-9999',{placeholder:'(XX) XXXXX-XXXX'}); 
     $('#v_cep').mask('99.999-999',{placeholder:'99.999-999'});
     $('#div_grupos').hide();
     $('#div_setor').hide();
     $('#div_funcao').hide();
     $("#div_alerta_cpf").hide();
     $("#div_alerta_CBO").hide();
	 $("#div_alerta_grupoEmedicao").hide();
     get_autocomplete_cbo();

     $('[data-toggle="popover"]').popover(); 

     var maskBehavior = function (val, e, field) {
      return val.replace(/\D/g, '').length == 11 ? '(00) 00000-0000' : '(00) 0000-00009';
    },
    maskInternal = function(val, e, field, options) {
      field.mask(maskBehavior.apply({}, arguments), options);
    },
    options = {onKeyPress: maskInternal};
    $('#v_celular').mask(maskBehavior, options);
  });



    function validar_campos() {
      var codCBO = true;//$('#codCBO').val(); Temporario
      
     // return alert(codCBO);
      //verifica se o código CBO foi adicionado
      if (codCBO) {
        var cpf = $('#v_cpf').val();
        $.ajax({
          url: "<?php echo base_url()?>empresa/funcionario/ajax_validar_cpf",
          dataType: 'json',
          type: 'get',
          data: {cpf:cpf},
          cache:false,
          success: function(data){  
            if(data){
              $('#v_cpf').val($('#v_cpf').val().replace('.', '').replace('.', '').replace('-', ''));
              $('#v_telefone').val($('#v_telefone').val().replace('(', '').replace(')', '').replace(' ', '').replace('-', ''));
              $('#v_celular').val($('#v_celular').val().replace('(', '').replace(')', '').replace(' ', '').replace('-', ''));
              $('#v_cep').val($('#v_cep').val().replace('.', '').replace('-', ''));
              document.getElementById("new_funcionario").submit();
            }else{
              $("#div_cpf").attr('class', 'col-md-4 has-error');
              $("#div_alerta_cpf").show();
              document.getElementById('v_cpf').focus();
              return false;
            }
          },
          error: function(d){
            $("#div_alerta_cpf").show();
            return false;
          }
        });

      }else{
        $("#div_CBO").attr('class', 'has-error');
        $("#div_alerta_CBO").show();
        document.getElementById('nomeCBO').focus();
        return false;
      }
    }

    function sem_acento(e,args)
    {   
        if (document.all){var evt=event.keyCode;} // caso seja IE
        else{var evt = e.charCode;} // do contrário deve ser Mozilla

        // criando a lista de teclas permitidas
        var valid_chars = '0123456789'; 
        var chr= String.fromCharCode(evt);  // pegando a tecla digitada
        if (valid_chars.indexOf(chr)>-1){return true;}
        return false; // do contrário nega
      }

      function validacpf() {
       cpf = $("#v_cpf").val();       
       if (!validaCPF(cpf)) {
        $("div_alerta_cpf").show();
       }
      }

   
      function get_grupo(){   
       var local_id = $('#local_id').val();
       $("#funcao_id").attr("disabled", "true");
       $("#funcao_id").html('');
       $("#setor_id").attr("disabled", "true");
       $("#setor_id").html('');
       $.ajax({
        url: "<?php echo base_url()?>empresa/funcionario/ajax_get_grupos",
        dataType: 'json',
        type: 'get',
        data: {local_id:local_id},
        cache:false,
        success: function(data){

          if(data){ 
           $('#div_grupos').show();
           var event_data = '';
            //event_data+=' ';
            $.each(data, function(index, value){
              event_data += '<option value="'+value.id+'">'+value.descricao+'</option>';
            });

            if(event_data!=''){
              $("#grupo_id").html('');
              $("#grupo_id").append('<option selected="selected" value="">Selecione o grupo</option>');
              $("#grupo_id").append(event_data);
              $("#grupo_id").removeAttr("disabled");
            }else{
             $("#grupo_id").html('');
             $("#grupo_id").append('<option selected="selected" value="">Nenhum grupo cadastrado para este local</option>');
             $("#grupo_id").attr("disabled", "true");
             get_setor();
             get_funcao();
           }
         }else{
          alert('Ocorreu um erro.');  
        } 
      },
      error: function(d){
       alert('Ocorreu um erro.');  
      }
      });
    } 

    function get_setor(){   
       var grupo_id = $('#grupo_id').val();
       $.ajax({
        url: "<?php echo base_url()?>empresa/funcionario/ajax_get_setor",
        dataType: 'json',
        type: 'get',
        data: {grupo_id:grupo_id},
        cache:false,
        success: function(data){
         // console.log(data);
          if(data){ 
            $('#div_setor').show();
            $('#div_funcao').show();
            var event_data = '';
           // event_data+=' <option selected="selected" value="">Selecione o setor</option>';
            $.each(data, function(index, value){
            event_data += '<option value="'+value.id+'">'+value.descricao+'</option>';
            });

           if(event_data!=''){
            $("#setor_id").html('');
            $("#setor_id").append('<option selected="selected" value="">Selecione o  setor</option>');
            $("#setor_id").append(event_data);
            $("#setor_id").removeAttr("disabled");

            }else{
             $("#setor_id").html('');
             $("#setor_id").append('<option selected="selected" value="">Nenhum setor cadastrado para este grupo</option>');
             $("#setor_id").attr("disabled", "true");
            }
          }else{
            alert('Ocorreu um erro.');   
          } 
        },
        error: function(d){
         $("#setor_id").html('');
         $("#setor_id").append('<option selected="selected" value="">Nenhum setor cadastrado para este grupo</option>');
         $("#setor_id").attr("disabled", "true");
       }
      });
    } 

     function get_funcao(){   
        var grupo_id = $('#grupo_id').val();
        $.ajax({
          url: "<?php echo base_url()?>empresa/funcionario/ajax_get_funcao",
          dataType: 'json',
          type: 'get',
          data: {grupo_id:grupo_id},
          cache:false,
          success: function(data){
           // console.log(data);
           if(data){ 
              var event_data = '';
              //event_data+=' ';
              $.each(data, function(index, value){
                event_data += '<option value="'+value.id+'">'+value.descricao+'</option>';
              });

              if(event_data!=''){
                $("#funcao_id").html('');
                $("#funcao_id").append('<option selected="selected" value="">Selecione a função</option>');
                $("#funcao_id").append(event_data);
                $("#funcao_id").removeAttr("disabled");
              }else{
                 $("#funcao_id").html('');
                 $("#funcao_id").append('<option selected="selected" value="">Nenhuma função cadastrada para este grupo</option>');
                 $("#funcao_id").attr("disabled", "true");
              }
            }else{
              alert('Ocorreu um erro.');
            } 
          },
          error: function(d){
           $("#funcao_id").html('');
           $("#funcao_id").append('<option selected="selected" value="">Nenhuma função cadastrada para este grupo</option>');
           $("#funcao_id").attr("disabled", "true");
         }
        });
      } 


     function caps(element){
      element.value = element.value.toUpperCase();
    }


    function proximaAba(){
      $(function () {
        $('#myTab li:last-child a').tab('show')
      })
    } 

    function get_autocomplete_cbo(){
      //$("#nomeCBO").attr('disabled', false);
      var nomeCBO = $('#nomeCBO').val();
      var cbo = [];
     // uf = get_codigo_uf_ibge(uf);
     $.ajax({
      url: "<?php echo base_url()?>empresa/funcionario/ajax_get_nomes_CBO",
      dataType: 'json',
      type: 'get',
      data: {nomeCBO:nomeCBO},
      cache:false,
      success: function(data){
        $.each(data, function(index, value){
          //console.log(value.descricao);
          cbo.push(value.descricao);  
        });
      },
      error: function(d){
       alert('Ocorreu um erro.');  
     }

   }); 

     $("#nomeCBO" ).autocomplete({
      source: cbo
    });

   }

   function get_cod_CBO(){
    var nomeCBO = $('#nomeCBO').val();
   // console.log(nomeCBO);
    $.ajax({
      url: "<?php echo base_url()?>empresa/funcionario/ajax_get_cod_CBO",
      dataType: 'json',
      type: 'get',
      //data: {nomeCBO:nomeCBO},
      cache:false,
      success: function(data){
        event_data='';
        $.each(data, function(index, value){

          //console.log(value.descricao)
          if (value.descricao == nomeCBO) {
            //console.log(value.id);
            $('#disabledCBO').val(value.codigo);  
            $("#div_cod_CBO").html('');
            $("#div_cod_CBO").append('<input type="hidden" value="'+value.codigo+'" id="codCBO" name="codCBO">'); 
             $("#div_cbo_id").html('');
            $("#div_cbo_id").append('<input type="hidden" value="'+value.id+'" id="cbo_id" name="cbo_id">'); 
             
            //$('#codCBO').val(value.codigo);  
          }
        });
      },
      error: function(d){
       alert('Ocorreu um erro.');  
     }

   }); 

  }


 function verificarIndicativoEdicaoGrupo(){
	$("#div_alerta_grupoEmedicao").hide();
	var local_id =  $('#local_id').val();
	var grupo_id = 	$('#grupo_id').val();

	if((local_id != '') && (grupo_id != '')){
	   $.ajax({
		url: "<?php echo base_url()?>empresa/funcionario/ajaxVerificarModoEdicaoGrupoEmpresa",
		dataType: 'json',
		type: 'get',
		  data: {local_id:local_id,grupo_id:grupo_id},
		  cache:false,
		  success: function(data){
			$.each(data, function(index, value){
				if(value.emEdicao == 'sim'){
					$("#div_alerta_grupoEmedicao").show();
				}		
			});
		
		  },
		  error: function(d){
		   alert('Ocorreu um erro.');  
		 }

	   });
	}
 }
</script>
</head>
<body>
  <div class="row">
   <?php $this->load->view('empresa/menuNavegacao');?>
 </div>	
 <div class="row">
  <div id="main" class="container">  
   <?php $this->load->view('empresa/msg_info');?>
   <div class="col-md-12">

    <h2>Novo Funcionário</h2>
    <p>
     <a href="<?php echo site_url("empresa/funcionario/lista/$codigo_empresa"); ?>" class="btn btn-xs btn-default">Listar Funcionários</a>
    </p>

    <span class="glyphicon glyphicon-flag"></span>Campos Obrigatórios

   <?php 
   echo validation_errors('<p>','</p>');
   if($this->session->flashdata('cadastro_positivo'))
   {
    echo '<p><font color="#228B22">'.$this->session->flashdata('cadastro_positivo').'</font></p>';
  }
  if($this->session->flashdata('cadastro_negativo'))
  {
   echo '<p><font color="#FF0000">'.$this->session->flashdata('cadastro_negativo').'</font></p>';
 }
 ?>
 <form accept-charset="UTF-8" action="<?php echo site_url("empresa/funcionario/cadastro/$codigo_empresa");?>" class="form-horizontal" onsubmit="validar_campos();return false;" id="new_funcionario" name="new_funcionario" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" value="✓" type="hidden"><input name="authenticity_token" value="AGOjy8iO1GzXyyzhf/qGziOJSD+aDxsh/b6bA+REhV0=" type="hidden"></div> 
  <div class="col-lg-12">
    <div class="row">
      <ul class="nav nav-tabs">
        <li class="active"><a href="#info-tab" data-toggle="tab">Informações</a></li>
        <li><a href="#endereco-tab" data-toggle="tab">Endereço</a></li>
      </ul>

      <div class="tab-content" id="myTab">
        <div class="tab-pane active in" id="info-tab">
          <div class="form-group">                  
            <div class="col-lg-8">
              <label class="control-label" for="nome"><span class="glyphicon glyphicon-flag"></span>Nome</label>
              <input class="form-control" id="nome" name="nome" size="50" required type="text" onkeyup="caps(this)" minlength="2">
            </div>

            <div class="col-lg-4">
              <label class="control-label"><label for="c_sexo">Sexo</label></label><br>
              <input id="masculino" name="c_sexo" type="radio" value="M" checked><label for="masculino"> Masculino</label>  
              <input id="feminino" name="c_sexo" type="radio" value="F"><label for="feminino"> Feminino</label>            
            </div>         
          </div>                 
          <div class="form-group">                  
            <div class="col-lg-4">
              <label class="control-label" for="d_data_nascimento"><span class="glyphicon glyphicon-flag" ></span>Nascimento</label>
              <input class="form-control" id="d_data_nascimento" required name="d_data_nascimento" type="date">       
            </div>         

            <div class="col-lg-4">
              <label class="control-label" for="v_nome_mae">Nome da mãe</label>
              <input class="form-control" id="v_nome_mae" name="v_nome_mae" size="50" type="text" onkeyup="caps(this)"> 
            </div>    
            <div class="col-lg-4">
              <label class="control-label" for="rg"><span class="glyphicon glyphicon-flag"></span>RG</label>
              <input class="form-control" id="rg" name="rg" required="required" size="30" type="text">       
            </div>      
          </div>  

          <div class="form-group">                  

            <div class="col-lg-4">
              <label class="control-label" for="n_orgao_emissor"><span class="glyphicon glyphicon-flag"></span>Orgão emissor</label>
              <input class="form-control" id="n_orgao_emissor" name="n_orgao_emissor" required="required" size="30" type="text">      
            </div>   
            <div id="div_cpf" class="col-lg-4">
              <label class="control-label"  for="v_cpf"><span class="glyphicon glyphicon-flag"a></span>CPF</label>
              <input class="form-control" id="v_cpf" name="v_cpf" required="required" size="30" type="text" title="Apenas números">  
            </div>       
            <div class="col-lg-4">
              <label class="control-label"><label for="nis_pis_pasep_nit"><span class="glyphicon glyphicon-flag"></span>NIS (PIS/PASEP/NIT)</label></label>
              <input class="form-control" id="nis_pis_pasep_nit" name="nis_pis_pasep_nit" size="30" type="number" title="Só é aceito números">  
            </div>  
          </div>

          <div class="form-group">                  

            <div class="col-lg-4">
              <label class="control-label" for="matricula"><span class="glyphicon glyphicon-flag"></span>Matricula</label>
              <input class="form-control" id="matricula" name="matricula" required="required" size="30" type="text"> 
            </div>
            <div class="col-lg-2">
              <label class="control-label"><label for="v_telefone">Telefone Residencial</label></label>
              <input class="form-control" id="v_telefone" name="v_telefone" type="text" onkeypress="return sem_acento(event);">         
            </div>


            <div class="col-lg-2">
              <label class="control-label"><label for="v_celular">Celular</label></label>
              <input class="form-control" id="v_celular" name="v_celular" type="text" placeholder="(XX) XXXXX-XXXX" onkeypress="return sem_acento(event);"> 
            </div> 
            <div class="col-lg-4">
              <label class="control-label"><label for="v_email">Email</label></label>
              <input class="form-control" id="v_email" name="v_email" type="text" placeholder="exemplo@exemplo.com"> 
            </div>  

          </div>   
          <div  class="form-group">
            <!--<div id="div_CBO">
              <div class="col-lg-4">
                <label class="control-label" for="nomeCBO"><span class="glyphicon glyphicon-flag"></span>Pesquisar profissão</label>
                <button type="button" class="btn btn-link btn-sm" data-toggle="popover" data-placement="bottom" data-trigger="focus" title="Descrição" data-content="Selecione ou informe uma profissão para preencher o CBO."><span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span></button>
                <input class="form-control" onkeyup="get_autocomplete_cbo();" onchange="get_cod_CBO();" id="nomeCBO" type="text">  
              </div>  
              <div class="col-lg-4">
                <label class="control-label"><label for="disabledCBO">CBO(Código de profissão)</label></label>
                <button type="button" class="btn btn-link btn-sm" data-toggle="popover" data-placement="bottom" data-trigger="focus" title="Descrição" data-content="Código preenchido automaticamente após selecionar a profissão."><span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span></button>
                <input class="form-control" disabled id="disabledCBO" value="" type="text">  
              </div>  
            </div>-->
          </div>
          <div id="div_cod_CBO"></div>
          <div id="div_cbo_id"></div>
         
          <div class="form-group">    
           <div class="col-lg-12">
            <label class="control-label"><label for="codCateg">Categoria do trabalhador</label></label>

            <select  allow_blank="true" class="form-control"  id="codCateg" name="codCateg" >
              <option selected="selected" value="">Nenhuma categoria</option>
              <?php 
              foreach ($codCateg as $cod) {
                echo '<option value="'.$cod['id'].'">'.$cod['descricao'].'</option>';
              }
              ?>
            </select>

          </div>              
          <div class="col-lg-4">
            <label class="control-label"><label for="local_id">Local</label></label>
            <select class="form-control" id="local_id" name="local_id" onchange='get_grupo()'>
              <option selected="selected" value="">Selecione o local</option>
              <?php
              foreach($local as $linha){ ?>
                <option value='<?php echo $linha['id'];?>'><?php echo $linha['descricao'];?></option>
        <?php } ?>
            </select>
          </div>




          <div id='div_grupos'>
           <div class="col-lg-4">
            <label class="control-label"><label for="grupo_id">Grupo</label></label>
            <select class="form-control" id="grupo_id" onchange="get_setor();get_funcao();verificarIndicativoEdicaoGrupo();" name="grupo_id">
            </select>
          </div>
        </div>
      </div>   
      <div class="form-group">                             
        <div id='div_setor'>
          <div class="col-lg-4">
            <label class="control-label"><label for="setor_id">Setor</label></label>
            <select class="form-control" id="setor_id" name="setor_id">
             <option selected="selected" value="">Selecione o setor</option>
           </select>
         </div>
       </div>
       <div id='div_funcao'>
         <div class="col-lg-4">
          <label class="control-label"><label for="funcao_id">Função</label></label>
          <select class="form-control" id="funcao_id" name="funcao_id">
           <option selected="selected" value="">Selecione a função</option>
         </select>
       </div>
     </div>
	<div class="col-lg-4">
	  <label class="control-label"><label for="dtIniCondicao">Início das atividades neste ambiente</label></label>
	  <button type="button" class="btn btn-link btn-sm" data-toggle="popover" data-placement="bottom" data-trigger="focus" title="Descrição" data-content="Informar data do início das atividades no ambiente atual."><span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span></button>
	  <input class="form-control" id="dtIniCondicao" name="dtIniCondicao" value="" type="date">  
	</div>	 
   </div>
   
 </div>

 <div class="tab-pane" id="endereco-tab">
   <div class="form-group">    
    <div class="col-lg-2">
      <label class="control-label"><label for="v_cep">CEP</label></label>
      <input class="form-control" id="v_cep" name="v_cep" type="text" size="30" onkeypress="return sem_acento(event);">  
    </div>  
    <div class="col-lg-8">
      <label class="control-label"><label for="v_logadrouro">Logradouro</label></label>
      <input class="form-control" id="v_logadrouro" name="v_logadrouro" type="text" size="30"> 
    </div>  
    <div class="col-lg-2">
      <label class="control-label"><label for="v_numer_logradouro">Numero</label></label>
      <input class="form-control" id="v_numer_logradouro" name="v_numer_logradouro" size="30" type="text"> </div>  

    </div> 

    <div class="form-group"> 
      <div class="col-lg-6">
        <label class="control-label"><label for="v_compl_logradouro">Complemento</label></label>
        <input class="form-control" id="v_compl_logradouro" name="v_compl_logradouro" type="text" size="30"> 
      </div>  
      <div class="col-lg-3">
        <label class="control-label"><label for="v_bairro">Bairro</label></label>
        <input class="form-control" id="v_bairro" name="v_bairro" size="30" type="text">     
      </div>  

      <div class="col-lg-3">
        <label class="control-label"><label for="v_municipio">Município</label></label>
        <input class="form-control" id="v_municipio" name="v_municipio" type="text" size="30">  
      </div>  
    </div>
    <div class="form-group">    

      <div class="col-lg-2"> 
        <label class="control-label"><label for="v_uf">UF</label></label>
        <select class="form-control" id="v_uf" name="v_uf">
          <option selected="selected" disabled>Selecione...</option> 
          <?php
          foreach($estadosBrasileiros as $estados)
          {
           echo "<option value='".$estados['sigla']."'>".$estados['nome']."</option>"; 
         }
         ?>  
       </select>
     </div>          
   </div>      
 </div>

</div>
</div>
</div>
</div>    
<div class="form-group">
  <div class="col-lg-12">
    <div id="div_alerta_cpf" class="alert alert-danger alert-dismissible" role="alert">
      <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <strong>Aviso!</strong> CPF inválido!
    </div>     
  </div>  
  <div class="col-lg-12">
    <div id="div_alerta_CBO" class="alert alert-danger alert-dismissible" role="alert">
      <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <strong>Aviso!</strong> O código CBO precisa ser preenchido!
    </div>     
  </div> 
 <div class="col-lg-12">
    <div id="div_alerta_grupoEmedicao" class="alert alert-warning alert-dismissible" role="alert">
      <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <strong>Atenção:</strong> O grupo selecionado está em modo edição; o histórico do ambiente será gerado quando a edição do grupo for finalizada.
    </div>     
  </div>   
</div>     
<div class="form-group">
  <div class="col-lg-1">
    <a href="<?php echo site_url("empresa/funcionario/lista/".$codigo_empresa);?>" class="btn btn-danger">Cancelar</a>
  </div>  
  <div class="col-lg-1">
    <input class="btn btn-success" name="commit" value="Salvar" type="submit">
  </div>      
</div>
</form>
<?php 
echo validation_errors('<p>','</p>');
if($this->session->flashdata('cadastro_positivo'))
{
  echo '<p><font color="#228B22">'.$this->session->flashdata('cadastro_positivo').'</font></p>';
}
if($this->session->flashdata('cadastro_negativo'))
{
 echo '<p><font color="#FF0000">'.$this->session->flashdata('cadastro_negativo').'</font></p>';
}
?>
<script type="text/javascript">


  $(function(){
    $("#new_funcionario").validate({
      rules: {
        nome: "required",
        rg: "required"
       // funcionario_empresa_id: "required"
     },
     messages: {
      nome: "Entre com o nome do funcionario.",
      rg: "Entre com o RG do funcionario"
        //funcionario_empresa_id: "Selecione a empresa"
      }
    });

    $("#new_funcionario").removeAttr("novalidate");



  });
</script>
</div>


</div><!-- /.container -->
</div>
<style type="text/css">
  .centro
  {
    text-align: center;
  }
</style>
<?php $this->load->view('empresa/rodape');?>
</body>
</html>                  
                  </div>
                </div>
              </div>
            </div>				
			
			
          </div>
        </div>
		
            	
		
        <!-- /page content -->

        <!-- footer content -->
        <footer>
          <div class="pull-right">
            Gentelella - Bootstrap Admin Template by <a href="https://colorlib.com">Colorlib</a>
          </div>
          <div class="clearfix"></div>
        </footer>
        <!-- /footer content -->
      </div>
    </div>

    <!-- jQuery -->
    <script src="../vendors/jquery/dist/jquery.min.js"></script>
    <!-- Bootstrap -->
    <script src="../vendors/bootstrap/dist/js/bootstrap.min.js"></script>
    <!-- FastClick -->
    <script src="../vendors/fastclick/lib/fastclick.js"></script>
    <!-- NProgress -->
    <script src="../vendors/nprogress/nprogress.js"></script>
    
    <!-- Custom Theme Scripts -->
    <script src="../build/js/custom.min.js"></script>
  </body>
</html>